<!DOCTYPE html> <html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Tizen basic template generated by Tizen Web IDE"/>

    <title>Tizen Web IDE - Tizen - Tizen basic Application</title>

    <script type="text/javascript">
        var gList = "";
        var current_database = "";
        var current_source = "";
        var current_country = "";
        var current_region = "";
        var current_station = "";
        var current_station_code = "";
        var count_of_downloading = 0;
        var wgt_private_directory;

        var listCreated = false;
    </script>

    <script src="tizen-web-ui-fw/latest/js/jquery.js"></script>
    <script src="tizen-web-ui-fw/latest/js/tizen-web-ui-fw-libs.js"></script>
    <script src="tizen-web-ui-fw/latest/js/tizen-web-ui-fw.js"
        data-framework-theme="tizen-black" data-framework-viewport-scale="false"></script>

    <script src="js/meecast.js"></script>
    <script src="js/library.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>

    <script type="text/javascript">
        $(document).delegate(
                "#main","pageinit", 
                 function() {
                    _prepare_config_js();
                    _currentstationname_js();
                 });
        $(document).delegate(
                "#manage_locations","pageinit", function() {
	                $("#manage_locations").bind("pagebeforeshow", function() {
                    gList = create_sources_list_js();
                    //$("#location_manager_listview").listview("refresh");
                    $("#location_manager_listview").html(gList).trigger("create").listview("refresh");
                 });
                 });
        $(document).delegate(
                "#manage_countries","pageinit", function() {
	                $("#manage_countries").bind("pagebeforeshow", function() {
                    gList = create_countries_list_js(current_database);
                    //$("#location_manager_listview").listview("refresh");
                    $("#countries_manager_listview").html(gList).trigger("create").listview("refresh");
                 });
                 });
        $(document).delegate(
                "#manage_regions","pageinit", function() {
	                $("#manage_regions").bind("pagebeforeshow", function() {
                    gList = create_regions_list_js(current_country);
                    //$("#location_manager_listview").listview("refresh");
                    $("#regions_manager_listview").html(gList).trigger("create").listview("refresh");
                 });
                 });
        $(document).delegate(
                "#manage_stations","pageinit", function() {
	                $("#manage_stations").bind("pagebeforeshow", function() {
                    Module.print('Test ' + current_country);
                    Module.print('Test ' + current_region);
                    gList = create_stations_list_js(current_country, current_region);
                    //$("#location_manager_listview").listview("refresh");
                    $("#stations_manager_listview").html(gList).trigger("create").listview("refresh");
                 });
                 });



    </script>

    <script type="text/javascript">
        function countries_page(sel_database){
            current_database = sel_database + ".db";
            current_source = sel_database + ".xml";
            prepare_database_js(sel_database); 
            //$.mobile.changePage('manage_country.html'); //Change page view
        }
        function regions_page(sel_country){
            current_country = sel_country;
            $.mobile.changePage('manage_region.html'); //Change page view
        }
        function stations_page(sel_region){
            current_region = sel_region;
            $.mobile.changePage('manage_station.html'); //Change page view
        }
        function select_station(sel_station){
            current_station = sel_station;
            current_station_code = station_code_js(current_country, current_region, current_station);
            save_station_js(current_source, current_country, current_region, current_station, current_station_code);
            $.mobile.changePage('index.html'); //Change page view
        }
        function stations_update(){
            console.log("Count ");
            console.log(count_of_downloading);
            stations_update_js();
        }
        function check_downloading(){
            console.log ("Check downloading");
            console.log (count_of_downloading);
            if (count_of_downloading < 1){
                stations_convert_js();
                update_view();
            }
        }
        function save_file_to_int(file){
            console.log ("Save to int");
            save_file_to_int_js(file);
            console.log(file);
        }
        function update_view(){
            _currentstationname_js();
            //gList = create_forecasts_list_js();
            //document.getElementById('forecasts_listview').innerHTML = gList;
            create_forecasts_list_js();
            console.log("wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww");
         //   if(!listCreated){
         //      $("#content").append("<ul id='list' data-role='listview' data-inset='true'></ul>");
         //      listCreated = true;
         //      $("#content").trigger("create");
         //   }
            $("#list").append("<li>Item</li>");
            $("#list").listview("refresh");
            console.log("wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww");
        }

    </script>

</head>

<body>
     <div data-role="page" id="main">
        <div data-role="header" data-position="fixed" data-id="foo">
            <h1><div id="main_station_name" style="font-family: courier new,courier,monospace;"></div>
            </h1>
        </div><!-- /header -->

        <div data-role="content" id="content">
         <button onclick="_currentstationname_js()" > Test</button>
         <ul data-role='listview' id='list'  data-inset='true'>
         </ul>

        </div><!-- /content -->

        <div data-role="footer" data-position="fixed" data-id="foo1">
            <div data-role="controlbar" data-style="tabbar">
                <ul>
                    <li><a href="javascript:stations_update();" data-icon="ctrlbar-playlists" class="ui-btn-active ui-state-persist">Update</a></li>
                    <li><a href="javascript:countries_page();" data-icon="ctrlbar-music_albums">Music</a></li>
                    <li><a href="settings_menu.html" data-icon="ctrlbar-artist">Menu</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->
    </div><!-- /page -->


</body>
</html>
